<p>
 While this document focuses on the format and content of messages from one system to another, it is useful to understand where this fits into the bigger picture of interoperable communication.
</p>
<p>
 The following diagram illustrates the most common message exchange in the IIS context, the VXU (unsolicited immunization record). When the sending system wishes to send a VXU to a receiving system, it must do several steps in preparation:
</p>
<ul>
 <li>
  &nbsp;Create message
  <sup>
   11
  </sup>
  <ul>
   <li>
    Assemble data on person of interest
   </li>
   <li>
    Build the VXU message with this data
   </li>
  </ul>
 </li>
 <li>
  Send the message
  <ul>
   <li>
    Connect to the receiving system. The partners must agree on how this is done.
   </li>
   <li>
    The sending system now sends the message over the connection and the receiving system catches the message.
   </li>
  </ul>
 </li>
</ul>
<p>
 The receiver accomplishes the following steps:
</p>
<ul>
 <li>
  Process the received message
  <ul>
   <li>
    Determine that the message is in the appropriate format.
   </li>
   <li>
    Parse the message into a format that it uses.
   </li>
   <li>
    Evaluate the message components to determine that these are correctly formatted and specified.
   </li>
  </ul>
 </li>
 <li>
  Send an acknowledgement to the sender, indicating the message has been successfully processed.
 </li>
 <li>
  Integrate the received record into the existing data base.
  <sup>
   12
  </sup>
  <ul>
   <li>
    Deduplicate on client to be sure that each client only has one record.
   </li>
   <li>
    Deduplicate the events (immunizations, for instance).
   </li>
   <li>
    Insert or update data.
   </li>
  </ul>
 </li>
 <li>
  The sending system accepts the acknowledgment and processes it.
 </li>
</ul>
<p>
 Obviously, the interaction may be more complex than this.
 <sup>
  13
 </sup>
 The connection may be rejected or fail. The message may be poorly formed or may not contain required information. Part of the message may contain errors, but these errors are not sufficient to reject the entire message.
</p>
<p>
 The business rules for both the sender and the receiver should be clearly specified so that each side understands how the message will be handled.
</p>
<p>
 When illustrating the processes involved in each message below, we will not elaborate on the processes that occur outside the actual message exchange.
</p>
<p>
 <img class="fr-fic fr-dib" src="/api/storage/file?name=b7d99d0d-e9b0-4947-aca9-1f8de6e00db7.png" style="width: 300px;"/>
</p>
<p style="text-align: center;">
 <strong>
  <span style="font-size: 12px;">
   Figure 2 VXU Process Model
  </span>
 </strong>
</p>
<p style="text-align: center;">
 <br/>
</p>
<table style="width: 100%;">
 <tbody>
  <tr>
   <td class="fr-thick" style="width: 100.0000%;">
    <strong>
     Note:
    </strong>
    It is vital that each implementation clearly document the business rules and special handling in a local Implementation Guide or Profile. Local implementers may place further constraints on the specifications found in this Guide. Optional fields or required fields that are allowed to be empty in this Guide may be made required. Repeating fields may be constrained to fewer repetitions.
    <br/>
   </td>
  </tr>
 </tbody>
</table>
<p>
 <br/>
</p>
